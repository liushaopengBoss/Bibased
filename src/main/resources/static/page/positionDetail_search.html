<!DOCTYPE html>
<html>

<head>

    <title>公司信息</title>

    <link rel="shortcut icon" href="favicon.ico"/> <link href="../css/bootstrap.min.css?v=3.3.6" rel="stylesheet"/>
    <link href="css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="css/footable.core.css" rel="stylesheet"/>

    <link href="css/animate.css" rel="stylesheet"/>
    <link href="css/style.css?v=4.1.0" rel="stylesheet"/>
    <link href="css/plugins/chosen.css" rel="stylesheet"/>

</head>

<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight">
    <!-- 动画 -->
    <div class="col-sm-12">
        <!--<div class="ibox ">-->
        <!--<div class="ibox-content">-->
        <!--<div class="spiner-example">-->
        <!--<div class="sk-spinner sk-spinner-three-bounce">-->
        <!--<div class="sk-bounce1"></div>-->
        <!--<div class="sk-bounce2"></div>-->
        <!--<div class="sk-bounce3"></div>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->

        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>查询条件 </h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="dropdown-toggle" data-toggle="dropdown" href="form_basic.html#">
                                <i class="fa fa-wrench"></i>
                            </a>

                        </div>
                    </div>
                    <div class="ibox-content">
                        <form class="form-horizontal m-t" id="commentForm">
                            <!-- 隐藏式向后端传递某页的参数-->
                            <input type="text" id="pageNum" name = "pageNum" style="display: none" value="1">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">网站类型：</label>
                                <div class="col-sm-5">
                                    <select data-placeholder="类型" class="chosen-select webSite" style="width:400px;" tabindex="2"  name="websine">
                                        <option value="" hassubinfo="true">无要求</option>
                                        <option value="lagou" hassubinfo="true">拉勾网</option>
                                        <option value="boss" hassubinfo="true">BOSS直聘</option>
                                        <!--<option value="job" hassubinfo="true">前程无忧</option>-->
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">城市：</label>
                                <div  class="col-sm-5">
                                    <select data-placeholder="选择城市" class="chosen-select " id = "citySelect" multiple style="width:400px;" tabindex="4" name="province">
                                        <option value="">请选择网站</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-sm-3 control-label">工作年份：</label>
                                <div class="col-sm-5">
                                    <select data-placeholder="工作年份" class="chosen-select" style="width:400px;" tabindex="2"  name="workYear">
                                        <option value="" hassubinfo="true">无要求</option>
                                        <option value="1-3" hassubinfo="true">1-3年</option>
                                        <option value="3-5" hassubinfo="true">3-5年</option>
                                        <option value="5-10" hassubinfo="true">5-10年</option>
                                        <option value="10" hassubinfo="true">10年以上</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">薪资要求：</label>
                                <div class="col-sm-5">
                                    <select data-placeholder="月薪" class="chosen-select" style="width:400px;" tabindex="2" name="salary">
                                        <option value="" hassubinfo="true">无要求</option>
                                        <option value="0-2" hassubinfo="true">2k以下</option>
                                        <option value="2-5" hassubinfo="true">2k-5k</option>
                                        <option value="5-10" hassubinfo="true">5k-10k</option>
                                        <option value="10-15" hassubinfo="true">10k-15k</option>
                                        <option value="15-25" hassubinfo="true">15k-25k</option>
                                        <option value="25-50" hassubinfo="true">25k-50k</option>
                                        <option value="50" hassubinfo="true">50k以上</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">公司规模：</label>
                                <div class="col-sm-5">
                                    <select data-placeholder="规模" class="chosen-select" style="width:400px;" tabindex="2" name="companySize">
                                        <option value="" hassubinfo="true">无要求</option>
                                        <option value="0-10" hassubinfo="true">10人以下</option>
                                        <option value="10-50" hassubinfo="true">10人-50人</option>
                                        <option value="50-150" hassubinfo="true">50人-150人</option>
                                        <option value="150-500" hassubinfo="true">150人-500人</option>
                                        <option value="500-2000" hassubinfo="true">500人-2000人</option>
                                        <option value="2000" hassubinfo="true">2000人以上</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">职位类型：</label>
                                <div class="col-sm-5">
                                    <select data-placeholder="类型" class="chosen-select" style="width:400px;" tabindex="2" name="positionType">
                                        <option value="" hassubinfo="true">无要求</option>
                                        <option value="全职" hassubinfo="true">全职</option>
                                        <option value="实习" hassubinfo="true">实习</option>
                                        <option value="兼职" hassubinfo="true">兼职</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">融资类型：</label>
                                <div class="col-sm-5">
                                    <select data-placeholder="类型" class="chosen-select" style="width:400px;" tabindex="2" name="finance">
                                        <option value="" hassubinfo="true">无要求</option>
                                        <option value="A轮" hassubinfo="true">A轮</option>
                                        <option value="B轮" hassubinfo="true">B轮</option>
                                        <option value="C轮" hassubinfo="true">C轮</option>
                                        <option value="D轮及以上" hassubinfo="true">D轮及以上</option>
                                        <option value="上市" hassubinfo="true">上市</option>
                                        <option value="未融资" hassubinfo="true">未融资</option>
                                        <option value="不需要融资" hassubinfo="true">不需要融资</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-2 col-sm-offset-3">
                                    <button class="btn btn-w-m queryButton  btn-primary" type="button">查询公司</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>公司信息</h5>

                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                <i class="fa fa-wrench"></i>
                            </a>

                        </div>
                    </div>
                    <div class="ibox-content">

                        <table class="footable table table-stripped toggle-arrow-tiny" data-page-size="8">
                            <thead>
                            <tr>
                                <th data-toggle="true">职位类型</th>
                                <th>职位名字</th>
                                <th data-hide="all">公司</th>
                                <th data-hide="all">城市</th>
                                <th data-hide="all">薪资范围</th>
                                <th data-hide="all">公司规模</th>
                                <th data-hide="all">工作年限</th>
                                <th data-hide="all">创建日期</th>
                                <th>是否有效</th>
                            </tr>
                            </thead>
                            <tbody id="dataBox">
                            </tbody>
                            <tfoot>
                            <tr>
                                <td colspan="5">
                                    <ul class="pagination pull-right"></ul>
                                </td>
                            </tr>
                            </tfoot>
                        </table>
                        <table width="100%">
                            <tr>
                                <td>
                                    <div id="Pagination-logistic    " class="logistic">
                                        <a href=" javascript:queryData('first')">首页</a>
                                        <a href="javascript:queryData('up')" >上一页</a>
                                        <a href="javascript:queryData('down')" >下一页</a>
                                    </div>
                                </td>
                                <td>
                                    <h4> 当前为：【<span id="nowPage"></span>】页
                                    </h4>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
   <!-- <div id="barcon" name="barcon"></div>-->

</div>


<!-- 全局js -->
<script src="js/jquery.min.js?v=2.1.4"></script>
<script src="js/bootstrap.min.js?v=3.3.6"></script>
<script src="js/plugins/footable.all.min.js"></script>
<script src="js/plugins/chosen.jquery.js"></script>
<!-- 自定义js -->
<script src="js/plugins/common.js"></script>
<script>
    $post("/rest/query/v1/queryPostionDetail",function(data){
        $("#barcon").html(data);
        goPage(pageNum);
    });
</script>
<script src="js/content.js?v=1.0.0"></script>
<script>
    $(document).ready(function() {

        var config = {
            '.chosen-select': {},
            '.chosen-select-deselect': {
                allow_single_deselect: true
            },
            '.chosen-select-no-single': {
                disable_search_threshold: 10
            },
            '.chosen-select-no-results': {
                no_results_text: 'Oops, nothing found!'
            },
            '.chosen-select-width': {
                width: "95%"
            }
        }
        for (var selector in config) {
            $(selector).chosen(config[selector]);
        }

        $(".webSite").change(function () {
            var value = $(".webSite").val();
            $.post("/rest/query/v1/queryCity?code="+value,function (result) {
                    var select = $("#citySelect");
                     select.html("");
                     select.prepend("<option value=''>请选择城市</option>");
//                    for(var i=0;result.length;i++){
//                        var option = $("<option value='"+result[i]+"'>"+result[i]+"</option>");
//                        select.append(option);
//                    }
            });
        });
        <!--点击搜索按钮首次请求-->
        $(".queryButton").click(function () {
            sendAjax();
        })
        //ajax请求并且，渲染界面
        function  sendAjax() {
            $.post('/rest/query/v1/queryPostionDetail',$("#commentForm").serialize(),function (resultData) {
                var dataBox = $("#dataBox");
                //清空数据 避免数据叠加
                dataBox.html("");
                if(resultData.positionDetailList.length >0){
                    //获取positionDetailList数据
                    var result = resultData.positionDetailList;
                    //创建数据
                    for(var i=0;i<result.length;i++){
                        var tr  = $(" <tr>\n" +
                            "                                    <td>"+result[i].thirdType+"</td>\n" +
                            "                                    <td>"+result[i].positionName+"</td>\n" +
                            "                                    <td>"+result[i].companyShortName+"</td>\n" +
                            "                                    <td>"+result[i].city+"</td>\n" +
                            "                                    <td>"+result[i].minSalary +" - "+ result[i].maxSalary +"K</td>\n" +
                            "                                    <td>"+result[i].companyMinSize +" - "+ result[i].companyMaxSize +"人</td>\n" +
                            "                                    <td>"+result[i].workMinYear +" - "+ result[i].workMaxYear +"年</td>\n" +
                            "                                    <td>"+new Date(result[i].positionCreateTime).toLocaleString()+"</td>\n" +
                            "                                    <td><a href=\"#\"><i class=\"fa fa-check text-navy\"></i> 有效</a></td>\n" +
                            "                                </tr>\n" +
                            "                               ");
                        //添加数据
                        dataBox.append(tr);
                    }
                    //向表单中设置pageNum
                    $("#pageNum").val(resultData.pageNum);
                    $("#nowPage").html(resultData.pageNum);
                }

            },'json');
        }
        2323
        queryData = function (flag){
            //判断是下一页还是上一页或者首页
            //首页
            if(flag=="first"){
                $("#pageNum").val(1);
            }else if(flag == "up"){ //上一页
                if($("#pageNum").val() >1){
                    $("#pageNum").val( Number($("#pageNum").val()) -1);
                }
            }else if(flag == "down"){//下一页
                $("#pageNum").val(Number($("#pageNum").val()) +1);
            }
            //ajax请求并且，渲染界面
            sendAjax();
        }









    });



</script>

<script type="text/javascript" src="http://tajs.qq.com/stats?sId=9051096" charset="UTF-8"></script>
<!--统计代码，可删除-->

</body>

</html>
